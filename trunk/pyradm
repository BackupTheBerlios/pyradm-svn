#!/usr/bin/python

import sys
import Config
from pyIMAP import IMAP, IMAPError
from cli import IMAPAdminCLI

try:
  options = Config.parseOptions(sys.argv)

  if options["help"]:
    printHelp()
  else:
    config = Config(options["config"])
    if not options["maintain"]:
      imapServer = IMAPServer(config)
    else:
      imapServer = None
    cli = IMAPAdminCLI(config, imapServer)
    cli.run()

except Config.OptionsExceptions, e:
except Config.ConfigException, e:
  print e

# vim:ts=2:sw=2:et
